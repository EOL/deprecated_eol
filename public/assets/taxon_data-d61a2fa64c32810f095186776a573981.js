if(!EOL)var EOL={};var _TOOLTIP_OPEN=!1;EOL.max_meta_rows=10,EOL.switch_subtab=function(t){$(".about_subtab").hide(),$(".glossary_subtab").hide(),$(".ranges_subtab").hide(),$(".info").hide(),t.parent().hasClass("about")||t.parent().hasClass("glossary")||t.parent().hasClass("ranges")?(EOL.hide_data_tables($("table.data")),$("#taxon_data .empty").hide(),$(".glossary_subtab").hide(),$(".help_text").hide(),$(".filters").hide(),t.parent().hasClass("about")?$(".about_subtab").show():t.parent().hasClass("glossary")?($(".glossary_subtab").show(),$(".glossary_subtab .help_text").show()):t.parent().hasClass("ranges")&&($(".ranges_subtab").show(),$(".ranges_subtab .help_text").show())):t.parent().hasClass("all")?($(".filters").show(),$("#taxon_data .empty").show(),$("#taxon_data > .help_text").show(),EOL.show_data_tables($("table.data"))):($(".filters").show(),EOL.hide_data_tables($("table.data")),EOL.show_data_tables($('table.data[data-toc-id="'+t.data("toc-id")+'"]')),$("#taxon_data > .help_text").show()),t.parent().parent().find("li").removeClass("active"),t.parent().addClass("active"),$("table.data tr.open").removeClass("open"),$("table.data .fold img").attr("src","http://media.eol.org//assets/arrow_fold_right-3bc349c6c72c8ea43caad0b1c2be7185.png"),$("table.meta").hide(),EOL.limit_data_rows()},EOL.create_info_dialog=function(t){var e=$(t).closest("[id]").attr("id");$(t).parent().children(".info_icon").remove(),$(t).attr("id","info_"+e).before('<a id="tip_'+e+'" class="info_icon def" data-info="'+e+'">&emsp;</a>').addClass("tip").prepend('<a href="#" class="close">&nbsp;</a>'),EOL.enable_info_dialogs($("#tip_"+e),$("table.data tr.data, table.meta tr")),EOL.enable_data_tab_glossary_links($(t)),$(t).appendTo(document.body)},EOL.create_info_ranges_dialog=function(t){var e=$(t).closest("[id]"),i=e.attr("id");$(t).attr("id","info_"+i).addClass("tip").prepend('<a href="#" class="close">&nbsp;</a>').append($(t).parent().parent().children("ul.glossary")),$(t).parent().parent().append('<a id="tip_'+i+'" class="info_icon def" data-info="'+i+'">&emsp;</a>'),EOL.enable_info_dialogs($("#tip_"+i),$("table.ranges tr")),EOL.enable_data_tab_glossary_links($(t)),$(t).parent().parent().children("ul.glossary").remove(),$(t).appendTo(document.body)},EOL.create_collection_taxon_info_dialog=function(t){var e=$(t).closest("[id]"),i=e.attr("id");$(t).attr("id","info_"+i).addClass("tip").prepend('<a href="#" class="close">&nbsp;</a>'),$(t).parent().parent().append('<a id="tip_'+i+'" class="info_icon def" data-info="'+i+'">&emsp;</a>'),EOL.enable_collection_taxa_info_dialogs($("#tip_"+i),$("table.taxon_collection tr")),$(t).parent().parent().children("ul.glossary").remove(),$(t).appendTo(document.body)},EOL.enable_collection_taxa_info_dialogs=function(t,e){t.unbind("click").on("click",function(){$(".site_column").unbind("click");var t=($(this),$("#info_"+$(this).data("info")));if(t.is(":visible"))t.hide("fast");else{$(".info_icon.tip").hide("fast");var e=$(this).offset();t.css({top:e.top+$(this).height()+26,left:e.left+$(this).width()}),$.ajax({url:"/collections/get_uri_name",type:"GET",data:{id:$(this).data("info").split(/[_]+/).pop()},complete:function(){},success:function(e){t.show("fast",function(){$(".site_column").on("click",function(){$(".info_icon").hide("fast"),$(".site_column").unbind("click")})}).find("a.close").on("click",function(){return $(".info_icon").hide("fast"),!1}),t.html('<div style="color:#616e7a; font-size:1.1em">'+e.name+'</div><div style="color:#93a4b0">'+e.uri+"</div>")},error:function(){}})}}),EOL.info_icon_mouse_hover(e)},EOL.enable_data_tab_glossary_links=function(t){t.closest("#taxon_data.main_container").length>0&&(t.find("a.glossary").each(function(){$(this).text($(this).data("tab-link-message"))}),t.find("a.glossary").on("click",function(t){t.preventDefault();var e=$(this);e.closest(".info").hide(),$("#tabs_sidebar li.glossary a").trigger("click"),setTimeout(function(){$("html,body").animate({scrollTop:$("#"+e.data("anchor")).offset().top},500)},100)}))},EOL.enable_info_dialogs=function(t,e){console.log("Adding click event for: "+t.data("info")),t.unbind("click").on("click",function(t){t.stopPropagation(),$(".site_column").unbind("click");var e=($(this),$("#info_"+$(this).data("info")));if(console.log("Clicked on tooltip: "+$(this).data("info")),e.is(":visible"))e.hide("fast");else{$(".info.tip").hide("fast");var i=$(this).offset();e.css({top:i.top+$(this).height(),left:i.left+$(this).width()}),e.show("fast",function(){$(".site_column").on("click",function(){$(".info").hide("fast"),$(".site_column").unbind("click")})}).find("a.close").on("click",function(){return $(".info").hide("fast"),!1})}}),EOL.info_icon_mouse_hover(e)},EOL.info_icon_mouse_hover=function(t){$(t).hover(function(){$(this).find(".info_icon.def").addClass("active")},function(){$(this).find(".info_icon").removeClass("active")})},EOL.enable_button=function(t){t.is(":disabled")&&t.removeAttr("disabled").fadeTo(225,1)},EOL.disable_button=function(t){t.is(":disabled")||t.attr("disabled",!0).fadeTo(225,.3)},EOL.hide_data_tables=function(t){t.hide(),t.prev("div.header_underlined").hide()},EOL.show_data_tables=function(t){t.show(),t.prev("div.header_underlined").show(),t.find("tr.data").show(),t.find("tr.actions").hide(),$("#curation_legend.help_text").show()},EOL.toggle_actions_row=function(t){var e=t.find(".fold img"),i=t.next(),n=(i.children("td"),t.next().find("table.meta"));if(e.parent().attr({title:"translation missing: en.data_row_additional_detail_assistive_js"}),i.is(":visible"))e.attr({src:"http://media.eol.org//assets/arrow_fold_right-3bc349c6c72c8ea43caad0b1c2be7185.png",alt:"translation missing: en.data_row_additional_detail_show_alt"}),i.hide(),n.hide();else{{t.attr("id")}e.attr({src:"http://media.eol.org//assets/arrow_fold_down-ce6a0365044544012bac4a6db35da012.png",alt:"translation missing: en.data_row_additional_detail_hide_alt"}),i.show(),n.show()}},EOL.sort_glossary=function(t,e){return $(e).find("dt").text()<$(t).find("dt").text()?1:-1},EOL.update_input_id_and_name=function(t,e){t.find("input").each(function(){$(this).attr("id",$(this).attr("id").replace(/\d+/,e)),$(this).attr("name",$(this).attr("name").replace(/\d+/,e)),$(this).data("id-element")&&$(this).data("id-element",$(this).data("id-element").replace(/\d+/,e)),$(this).data("include-predicate_known_uri_id")&&$(this).data("include-predicate_known_uri_id",$(this).data("include-predicate_known_uri_id").replace(/\d+/,e)),$(this).attr("data-update-elements")&&$(this).attr("data-update-elements",$(this).attr("data-update-elements").replace(/\d+/,e))})},EOL.limit_data_rows=function(){$("table.data tr.more").remove(),$("table.data tr.data.first_of_type:visible").each(function(){var t=$(this).data("type"),e=$(this).closest("table").find('tr[data-type="'+t+'"]:visible');if(e.length>EOL.max_meta_rows){var i=1;e.each(function(){i>EOL.max_meta_rows&&$(this).hide(),i++}),e.filter(":last").after('<tr data-type="'+t+'" class="data nested more"><th></th><td><a href="#" class="more">'+$("table.data").data("more").replace("NNN",e.length-EOL.max_meta_rows)+"</a></td><td></td><td></td></tr>"),$("tr.more a.more").unbind("click").on("click",function(){var t=$(this).closest("tr");return $('tr.data[data-type="'+t.data("type")+'"]').show(),t.remove(),!1})}})},EOL.yank_glossary_terms=function(){},EOL.enable_hover_list_items=function(){$("ul.glossary li").hover(function(){$(this).find("li.hover").show()},function(){$(this).find("li.hover").hide()})},EOL.update_unit_select_options=function(t){$.ajax({url:"/known_uris/autocomplete_known_uri_units?predicate_known_uri_id="+t,dataType:"json",success:function(t){$("select#unit").find("option:gt(0)").remove(),$.each(t,function(t,e){$("select#unit").append($("<option></option>").attr("value",e.uri).text(e.value))})}})},$(function(){if($("table.data tr.actions").hide().prev().find(".fold img").attr("src","http://media.eol.org//assets/arrow_fold_right-3bc349c6c72c8ea43caad0b1c2be7185.png"),$("table.data .fold a").on("click",function(){return $(this).closest("tr").click(),!1}),$("table.data tr.data").on("click",function(t){var e,i;if(t.target?e=$(t.target):t.srcElement&&(e=$(t.srcElement)),i=e,e.is("tr")||(e=e.closest("tr")),!(e.hasClass("hidden")&&e.closest("table.search").length>0)){if(i.is("a"))return t.stopPropagation(),void 0;e.next().find(".info").each(function(){EOL.create_info_dialog(this)}),EOL.toggle_actions_row(e)}}),$("table.data tr.actions td .metadata").live("click",function(t){$(t.target).closest("a").length||EOL.toggle_actions_row($(this).closest("tr").prev())}),$("#tabs_sidebar.data ul.subtabs a").on("click",function(){return EOL.switch_subtab($(this)),!1}),EOL.limit_data_rows(),""!==location.hash){var t=location.hash.replace(/\?.*$/,""),e=$(t);if(e.click(),void 0!==e.offset()){var i=e.offset().top-200;$("html, body").animate({scrollTop:i})}}$("#data_summary table").hover(function(){$("span.remove").show()},function(){$("span.remove").hide()}).find("span.remove").hide(),$("a.button.hidden").hide(),$("table.data tr.data .info").each(function(){EOL.create_info_dialog(this)}),$("form.copy .vital li .info").each(function(){EOL.create_info_dialog(this)}),$("table.ranges tr .info, table.ranges.search tr .info").each(function(){EOL.create_info_ranges_dialog(this)}),EOL.enable_hover_list_items(),$(".page_actions .data_download a").on("click",function(){window.alert($(this).parent().data("alert").replace(/<\/?[^>]+>/g,""))})});